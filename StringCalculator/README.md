# 2장 <br>문자열 계산기 구현을 통한 테스트와 리팩토링

### 요약

>- main() 메소드를 활용한 테스트의 문제점
>
>  > main() 메소드에서 수행되는 로직이 많아질수록 복잡도가 증가하고, 이는 유지하는데 부담을 준다. 기능에따라 메소드를 분리하여 해결할 수 있도록 하자.
>  >
>  > 또, 매번 테스트 결과를 수동으로 확인해야 한다는 것은 로직의 복잡도가 높고, 오래될 수록 알아내기 힘들어 진다.
>
>  
>
>- 단위 테스트를 활용하자
>
>  > 한 번에 메소드 하나에만 집중하여 작성하자.
>  >
>  > 결과 값을 프로그램을 통해 자동화하여 확인하도록 하자.
>  >
>  > 테스트 코드의 중복을 제거하도록 하자. `@Before, @After` 등의 활용

### 문자열 계산기 요구사항

> - 쉼표(`,`) 또는 콜론(`:`)을 구분자로 가지는 문자열을 전달하는 경우 구분자를 기준으로 분리한 각 숫자의 합을 반환한다.
>   ( ex. "" => 0, "1,2" => 3, "1,2,3" => 6, "1,2:3" => 6)
> - 기본 구분자 이외의 구분자를 커스텀 구분자로 지정할 수 있다. "//"와 "\n"사이의 위치하는 문자를 커스텀 구분자로 사용한다.
>   (ex "//<\n1<2<3" => 6, "//|\n1|2|3" => 6)
> - 문자열 계산기에 음수를 전달하는 경우 `RuntimeException`으로 예외 처리하기
> - 제공되는 힌트를 보지 말고 직접 구현하도록 하기

### 개인적 도전

> TDD 활용해보기
>
> 정규 표현식을 통한 입력에 대한 검증 및 조작하기
>
> 구현 단위별 `conventional commit messgae` 작성하기

## 추가 사항

### 추가 요구사항

- 메소드가 한 가지 책임만 가지도록 구현
- 인덴트는 1단계로 유지
- else 사용 지양

### 리팩토링

- 테스트 로직 변경

  >각각의 기능을 수행하는 메서드 별로 테스트를 진행하였다.
  >
  >테스트를 조금 더 명확하게 정의할 필요를 느꼈다. 테스트를 위해서만 public으로 접근 범위가 변경된 메서드들이 발생하였는데, 이 부분을 의심해 봐야 할 것 같다. 또, 테스트의 검증 결과에 대해 정리하여 테스트를 성립하도록 변경해야 할 것 같다.
  >
  >
  >테스트 클래스도 구현, 예외에 따라 분리하여 작성하자

- 메서드의 분리

  >규모가 매우매우 작은 수준의 프로그램에서는 극단적인 분리에 대해 연습할 필요가 있다. 로직의 진행도를 정의하고 진행 하나하나에 대해서 메서드를 분리하여 한 가지 책임만 부여하도록 변경해야 할 것이다. 

- 로직에 대한 수정

  >로직이 효율적인가에 대한 의문
  >
  >중복되는 코드, 혹은 중복되는 기능을 통합하여 오류 가능성을 최대한 줄이자.
  >
  >정규표현식을 좀 더 유연하게 사용할 수 있도록 변경하도록 할 것.

리팩토링 결과: https://github.com/TaeyeonRoyce/Next-step-practice/commit/1fa8d2419a8f68a4206b18cdf2a3dd26e0e3de4f#diff-debc62322833e58f2e02675c35685ee4661f3063a355e0f4f13760ad453cfbf1

